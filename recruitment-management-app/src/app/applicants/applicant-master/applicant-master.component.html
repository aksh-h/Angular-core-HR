<div id="index" class="row">
    <div class="col-md-12 col-sm-12">
        <div class="x_panel">
            <div class="x_title">
                <h2>Applicant List</h2>
                <button *ngIf="!readonlycontrols" type="button" style="width: 80px;" class="btn btn-primary pull-right"
                    (click)="ShowPopup()">
                    Create
                </button>
                <div class="clearfix"></div>
            </div>
            <div class="x_content">
                <div class="row">
                    <div class="col-sm-12">
                        <div class="card-box table-responsive">
                            <table id="Applicanttable" class="table table-striped table-bordered" cellspacing="0"
                                width="100%">
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row" data-backdrop="static" style="display: none;" id="myModal">
    <div class="col-md-12 col-sm-12">
        <div class="x_panel ">
            <div>
                <div>
                    <div class="x_title">
                        <h2>Add Applicant </h2>
                        <button (click)="HidePopup()" style="width: 90px;"
                            class="btn btn-primary Back pull-right">Back</button>
                        <div class="clearfix"></div>
                    </div>
                    <form [formGroup]="applicantform" (ngSubmit)="onSubmit()" method="post" novalidate>
                        <div class="x_content text-center">
                            <div class="form-group" style="margin-bottom: 50px;">
                                <label class="col-form-label col-md-2 col-sm-3 label-align">Name<span
                                        class="required">*</span></label>
                                <div class="col-md-4 col-sm-3">
                                    <div [ngClass]="{ 'bad' : isSubmitted && f.name.errors }">
                                        <!-- <div *ngIf="f.name.errors.minlength">  </div>-->
                                        <input [readonly]="readonlycontrols" name="name" class="form-control"
                                            formControlName="name" data-validate-length-range="50" minlength=3
                                            [(ngModel)]="Model.name" placeholder="Ex:ABC" required="required">
                                    </div>
                                </div>

                                <label class="col-form-label col-md-2 col-sm-3 label-align">DOB<span
                                        class="required">*</span></label>
                                <div class="col-md-4 col-sm-3">
                                    <div [ngClass]="{ 'bad' : isSubmitted && f.dob.errors }">
                                        <input [readonly]="readonlycontrols" name="dob" class="form-control"
                                            formControlName="dob" data-validate-length-range="50"
                                            [(ngModel)]="Model.dob" placeholder="Ex: 05/20/1990" required="required">
                                    </div>
                                </div>

                            </div>

                            &nbsp;


                            <div class="form-group" style="margin-bottom: 50px;">
                                <label class="col-form-label col-md-2 col-sm-3 label-align">Email Address<span
                                        class="required">*</span></label>

                                <!-- <div class="col-md-4 col-sm-3">
                                    <input type="text" formControlName="emailAddress" class="form-control"
                                        [ngClass]="{ 'bad': isSubmitted && f.emailAddress.errors }"
                                        data-validate-length-range="50" [(ngModel)]="Model.emailAddress"
                                        placeholder="Ex: ABC@gmail.com" required="required" />
                                    <div *ngIf="isSubmitted && f.emailAddress.errors" class="invalid-feedback">
                                        <!-- <div *ngIf="f.emailAddress?.errors.required">Email is required</div> -->
                                        <!-- <div *ngIf="f.emailAddress?.errors.email">Email must be a valid email address
                                        </div>
                                    </div>
                                </div>  -->
                                <div class="col-md-4 col-sm-3">
                                    <div [ngClass]="{ 'bad' : isSubmitted && f.emailAddress.errors }">
                                        <input [readonly]="readonlycontrols" name="emailAddress" class="form-control" formControlName="emailAddress"
                                            [(ngModel)]="Model.emailAddress" data-validate-length-range="50"  placeholder="Ex: ABC@gmail.com" required="required">
                                    </div>
                                       <!-- <div *ngIf="f.emailAddress?.errors.required">Email is required</div>  -->
                                       <!-- <div *ngIf="f.emailAddress?.errors.email">Email must be a valid email address</div> -->
                                </div>
                                <label class="col-form-label col-md-2 col-sm-3 label-align">Phone Number<span class="required">*</span></label>
                                <div class="col-md-4 col-sm-3">
                                    <div [ngClass]="{ 'bad' : isSubmitted && f.phoneNumber.errors }">
                                        <input [readonly]="readonlycontrols" name="phoneNumber" class="form-control" formControlName="phoneNumber"
                                            data-validate-length-range="50" [(ngModel)]="Model.phoneNumber" placeholder="Ex: 9934253421" required="required">
                                    </div>
                                </div>
                                

                            </div>

                            &nbsp;

                            <div class="form-group" style="margin-bottom: 50px;">
                                <label class="col-form-label col-md-2 col-sm-3 label-align">Qualification<span
                                    class="required">*</span></label>
                            <div class="col-md-4 col-sm-3">
                                <div [ngClass]="{ 'bad' : isSubmitted && f.qualification.errors }">
                                    <input [readonly]="readonlycontrols" name="qualification" class="form-control"
                                        formControlName="qualification" data-validate-length-range="50"
                                        [(ngModel)]="Model.qualification" placeholder="Ex: B.E" required="required">
                                </div>
                            </div>
                                <label class="col-form-label col-md-2 col-sm-3 label-align">Years Of Experience<span
                                        class="required">*</span></label>
                                <div class="col-md-4 col-sm-3">
                                    <div [ngClass]="{ 'bad' : isSubmitted && f.experience.errors }">
                                        <input [readonly]="readonlycontrols" type="number" min="0" name="experience"
                                            class="form-control" formControlName="experience"
                                            data-validate-length-range="50" [(ngModel)]="Model.experience"
                                            placeholder="Ex: 5" required="required">
                                    </div>
                                </div>

                                

                            </div>
                            &nbsp;
                            <div class="form-group" style="margin-bottom: 50px;">
                                <label class="col-form-label col-md-2 col-sm-3 label-align">Relevant Experience<span
                                    class="required">*</span></label>
                            <div class="col-md-4 col-sm-3">
                                <div [ngClass]="{ 'bad' : isSubmitted && f.experience.errors }">
                                <input [readonly]="readonlycontrols" type="number" min="0" name="relevantExperience"
                                    class="form-control" formControlName="relevantExperience"
                                    data-validate-length-range="50" [(ngModel)]="Model.relevantExperience"
                                    placeholder="Ex: 2">
                                </div>
                            </div>
                                <label class="col-form-label col-md-2 col-sm-3 label-align">Current CTC<span
                                        class="required">*</span></label>
                                <div class="col-md-4 col-sm-3">
                                    <input [readonly]="readonlycontrols" type="number" name="currentCtc"
                                        class="form-control" formControlName="currentCtc"
                                        data-validate-length-range="50" [(ngModel)]="Model.currentCtc"
                                        placeholder="Ex:5">

                                </div>

                                

                            </div>
                            &nbsp;
                            <div class="form-group" style="margin-bottom: 50px;">
                                <label class="col-form-label col-md-2 col-sm-3 label-align">Expected CTC</label>
                                <div class="col-md-4 col-sm-3">
                                    <input [readonly]="readonlycontrols" name="expectedCtc"
                                        formControlName="expectedCtc" class="form-control"
                                        data-validate-length-range="50" [(ngModel)]="Model.expectedCtc"
                                        placeholder="Ex:6">
                                </div>
                                <label class="col-form-label col-md-2 col-sm-3 label-align">Joining Time</label>
                                <div class="col-md-4 col-sm-3">
                                    <input [readonly]="readonlycontrols" name="joiningTime"
                                        formControlName="joiningTime" class="form-control"
                                        data-validate-length-range="50" [(ngModel)]="Model.joiningTime"
                                        placeholder="Ex:05/20/1990">
                                </div>

                                

                            </div>
                            &nbsp;
                            <div class="form-group" style="margin-bottom: 50px;">
                                <label class="col-form-label col-md-2 col-sm-3 label-align">Skillsand Proficiency<span
                                    class="required">*</span></label>
                            <div class="col-md-4 col-sm-3">
                                <div [ngClass]="{ 'bad' : isSubmitted && f.skillsandProficiency.errors }">
                                    <textarea name="skillsandProficiency" [readonly]="readonlycontrols"
                                        formControlName="skillsandProficiency" class="form-control"
                                        data-validate-length-range="100" [(ngModel)]="Model.skillsandProficiency"
                                        placeholder="Ex: sql,java" required="required"></textarea>
                                </div>
                            </div>
                                <label class="col-form-label col-md-2 col-sm-3 label-align">Location Prefered</label>
                                <div class="col-md-4 col-sm-3">
                                    <input [readonly]="readonlycontrols" name="locationPreference"
                                        formControlName="locationPreference" class="form-control"
                                        data-validate-length-range="50" [(ngModel)]="Model.locationPreference"
                                        placeholder="Ex:Banglore">
                                </div>

                                

                            </div>
                            &nbsp;
                            <div class="form-group" style="margin-bottom: 50px;"> 
                                <label class="col-form-label col-md-2 col-sm-3 label-align">Refered By</label>
                                <div class="col-md-4 col-sm-3">
                                    <textarea name="referedBy" formControlName="referedBy" [readonly]="readonlycontrols"
                                        class="form-control" data-validate-length-range="100"
                                        [(ngModel)]="Model.referedBy" placeholder=""></textarea>
                                </div>
                                <label class="col-form-label col-md-2 col-sm-3 label-align">Job Type</label>
                                <div class="col-md-4 col-sm-3">
                                    <textarea name="jobType" formControlName="jobType" [readonly]="readonlycontrols"
                                        class="form-control" data-validate-length-range="100"
                                        [(ngModel)]="Model.jobType" placeholder=""></textarea>
                                </div>

                               

                            </div>
                            &nbsp;

                            <div class="form-group" style="margin-bottom: 50px;">
                                <label class="col-form-label col-md-2 col-sm-3 label-align">Passport Number</label>
                                <div class="col-md-4 col-sm-3">
                                    <input [readonly]="readonlycontrols" name="passportNo" class="form-control"
                                        formControlName="passportNo" data-validate-length-range="50"
                                        [(ngModel)]="Model.passportNo" onkeyup="this.value = this.value.toUpperCase();"
                                        placeholder="Ex: F78231452">

                                </div>

                                <label for="Check" class="col-form-label col-md-2 col-sm-3 label-align">PAN Number<span
                                    class="required">*</span></label>
                                <div class="col-md-4 col-sm-3">
                                    <div [ngClass]="{ 'bad' : isSubmitted && f.panNo.errors }">
                                        <input [readonly]="readonlycontrols" name="panNo" class="form-control" formControlName="panNo"
                                            [(ngModel)]="Model.panNo"  onkeyup="this.value = this.value.toUpperCase();" placeholder="Ex: ABCDE1234F" required="required">
                                    </div>
                                    <!-- <div *ngIf="f.panNo?.errors.required">PAN No. is required</div> -->
                                    <div *ngIf="f.panNo?.errors"></div>
                                </div>
                            </div>
                            &nbsp;
                            <div class="form-group" style="margin-bottom: 50px;">
                                <label class="col-form-label col-md-2 col-sm-3 label-align">Notice Period</label>
                                <div class="col-md-4 col-sm-3">
                                    <textarea name="noticePeriod" formControlName="noticePeriod"
                                        [readonly]="readonlycontrols" class="form-control"
                                        data-validate-length-range="100" [(ngModel)]="Model.noticePeriod"
                                        placeholder=""></textarea>
                                </div>
                                <label class="col-form-label col-md-2 col-sm-3 label-align">Applicant Active<span
                                       class="required">*</span></label>
                               <div class="col-md-4 col-sm-3">
                                   <div [ngClass]="{ 'bad' : isSubmitted && f.applicantactive?.errors }">

                                       <select class="form-control" id="applicantactive" name="source" formControlName="applicantActive">
                                           <option value="15">15 days</option>
                                           <option value="30">30 days</option>
                                           <option value="45">45 days</option>
                                           <option value="60">60 days</option>
                                       </select>
                                   </div>
                               </div> 
                           
                            </div>
                            &nbsp;
                            
                            <div class="form-group" style="margin-bottom: 50px;">
                                <label class="col-form-label col-md-2 col-sm-3 label-align">Source</label>
                                <div class="col-md-4 col-sm-3">
                                    <select name="source" (change)="onChange($event)"  formControlName="sourceId"  [(ngModel)]="Model.sourceId" class="form-control select2" type="text">
                                        <!-- [(ngModel)]="sourceId" -->
                                        <option selected value="1">Direct</option>
                                        <option value="2">Vendor</option>
                                        <option value="3">Portal</option>
                                        <option value="4">Internal</option>
                                    </select>
                                </div>
                            
                                <div *ngIf="selectedType == '2'">
                                  <label class="col-form-label col-md-2 col-sm-3 label-align">Select Vendor<span
                                    class="required">*</span></label>
                                    <div class="col-md-4 col-sm-3">
                                            <select name="vend" class="form-control" formControlName="vendorId"  [(ngModel)]="Model.vendorId" placeholder="Ex:Infosys" required="required">                                   
                                                <option *ngFor="let vendor of VendorList" [value]="vendor.vendorId">{{vendor.vendorName}}</option>
                                            </select> 
                                        <div class="col-md-3 col-sm-3"></div>
                                    </div> 
                                </div> 
                                
                                <div *ngIf="selectedType == '3'" >
                                    <label class="col-form-label col-md-2 col-sm-3 label-align">Select JobPortal<span
                                        class="required">*</span></label>
                                        <div class="col-md-4 col-sm-3">
                                            <select name="portal" class="form-control"  formControlName="portalId" [(ngModel)]="Model.portalId" placeholder="Ex:LinkedIn" required="required">                                   
                                                <option *ngFor="let portal of JobPortalList" [value]="portal.portalId">{{portal.portalName}}</option>
                                            </select> 
                                            <div class="col-md-3 col-sm-3"></div>
                                        </div> 
                                </div> 
                                <div *ngIf="selectedType == '4'">
                                    <label class="col-form-label col-md-2 col-sm-3 label-align">Select Internal<span
                                        class="required">*</span></label>
                                        <div class="col-md-4 col-sm-3">
                                            <input name="internal" type="text" class="form-control" formControlName="employeeEmailId" [(ngModel)]="Model.employeeEmailId" id="employeeEmailId" placeholder="Ex:Ramesh@gmail.com">
                                            <div class="col-md-3 col-sm-3"></div>
                                        </div>
                                </div>
                            </div>

                            <div class="form-group" style="margin-bottom: 50px;">
                                <label class="col-form-label col-md-2 col-sm-3 label-align">Upload File<span
                                    class="required">*</span></label>
                                <div class="col-sm-3">
                                    <input type="text" class="form-control" value="{{this.path}}">
                                </div>
                                <div class="col-md-1 col-sm-2">
                                    <button class=" btn btn-basic" (click)="Browse()" type="button">Browse</button>
                                    <div *ngIf="f.file.touched && f.file.invalid" class="alert alert-danger">
                                        <div *ngIf="f.file.errors.required">File is required.
                                       
                                    </div>
                                </div>
                            </div>
                        
                            <input style="display: none;" formControlName="file" accept=".doc,.docx,.pdf,.txt" id="file" type="file"
                                class="form-control" (change)="onFileChange($event)">
                           </div>
                            &nbsp;

                            <div class="text-center">
                                <button type="button" (click)="onSubmit()" style="width: 80px;" class="btn btn-primary">
                                    Save
                                </button>
                                <button type="button" (click)="HidePopup()" style="width: 80px;" class="btn btn-danger"
                                    data-dismiss="modal">Cancel</button>
                            </div>
                            &nbsp; &nbsp;&nbsp; &nbsp;
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="spin" *ngIf="loader">
    <mat-spinner class="custom-spinner-color"></mat-spinner>
</div>